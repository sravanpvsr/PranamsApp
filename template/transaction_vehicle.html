{% extends "base.html" %}
{% load bootstrap4 %}
{% block  myblock %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<style>

        #id_Sticker_Number{
           padding:5px;
           width:100%;
        }

</style>

         <!-- {{form}} -->
<center>
        <div class ="col-md-4 mx-auto">               
                <h1 style="color:rgb(48, 2, 38); font-family:verdana;
                background-color:rgb(247, 174, 216);">Vehicle Movement</h1>
        </div>
</center>            



<div class="container">
        <div class="row">
                <div style="background-color:rgb(240, 216, 234); " class ="col-md-6 mx-auto">
                
                        
                                <form action="" method="POST" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        
                                        <!-- Room Field -->
                                        <div class="form-group">
                                                <label for="exampleInputEmail1">{{vehicle_tr_form.Sticker_Number.label}}</label>
                                                
                                                {{vehicle_tr_form.Sticker_Number}}

                                        </div>

                                        <!-- Name Field -->
                                                       
                                        <div id="id_vehicle">

                                        </div>
                                        
                                        <!-- {{form.as_table}} -->
                                        <!-- <hr> -->
                                        <div class="container">
                                                <div class="center">
                                        <input type="submit" value="Submit" class="btn btn-success">
                                        <!-- <input type="submit" value="Out" class="btn btn-danger"> -->
                                        </div>
                                </div>
                        </div>
                                        <!-- </hr> -->
                                        
                                       

                                        

                                </form>
                        
                </div>
        </div>
</div>

<script>
        $("#id_Sticker_Number").change(function () { 
       
               console.log("change")
       
               const url='{% url "vehicle_transaction" %}'
               const Sticker_Number=$(this).val();
        //        const Room=$("#id_Room").val();
       
               $.ajax({                       // initialize an AJAX request
                   url: url,                    // set the url of the request (= /vehicle/ )
                   data: {
                       'Sticker_Number': Sticker_Number
                //        ,
                        // 'Room':Room      // add Room  to the GET parameters
                   },
                   success: function (data) {   
                       
                       //$("#id_city").html(data); 
       
       
                        let html_data = '<option value=""></option>';
                        html_data='<label>Vehicle</label>';
                        html_data +='<select name="Vehicle_No" class="form-control">'
                        data.forEach(function (name) {
                            
                            html_data += `<option name="Vehicle_No">${name}</option>`
                           
                        });
                        html_data +='</select>'
                        
                        $("#id_vehicle").html(html_data);
       
                   
                   }
               });
       
       
       
       
       
            });
           
       
       
       
       
        
             </script>

{% if status %}
        <script>
                alert("{{status}}")
        </script>
{% endif %}

{% if errorStatus %}
        <script>
                alert("{{errorStatus}}")
        </script>
{% endif %}



{% endblock %}
